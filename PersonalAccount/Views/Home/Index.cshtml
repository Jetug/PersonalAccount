@{
    ViewData["Title"] = "Главная страница";
    Layout = "_Master";
}

<!doctype html>
<html>
<head>
    <title>Hello ASP.NET MVC Core</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <style>
    </style>

</head>

<body>
    <div class="head__right auth">
        <input id="authBtn" type="button" class="btn btn-primary" value="Авторизация">
    </div>

    <a href="/Account/Students">
        <input type="button" class="btn btn-primary" value="Info Page">
    </a>



    <div id="modal_auth" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Авторизация</h5>
                </div>
                <div class="modal-body">
                    <input type="text" name="login" class="form-control"
                           id="login" placeholder="Введите Логин">
                    <br class="form-group">
                    <input type="text" name="password" class="form-control"
                           id="password" placeholder="Введите Пароль">
                    <br />
                    <p id="l_result"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button id="btn_login" type="button" class="btn btn-primary">Вход</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        let authWindow = document.getElementById('fogging')

        $('#btn_login').click(function () {
            $.ajax({
                type: "POST",
                url: "/Home/Login",
                data: {
                    "login": $("#login").val(),
                    "password": $("#password").val(),
                },
                success: function (result) {
                    if (result == true)
                        document.location.href = "/Account/Students"
                    else
                        $("#l_result").text("Неверный логин или пароль")
                },
            });
        });



        $('#btn_cancel').click(function () {
            authWindow.style.display = "none"
        })

        window.onclick = function (event) {
            if (event.target == authWindow) {
                authWindow.style.display = "none";
            }
        }

        $('#authBtn').click(function () {
            //authWindow.style.display = "block"
            var myModal = new bootstrap.Modal(document.getElementById('modal_auth'))
            myModal.show()
        })
    </script>
</body>
</html>